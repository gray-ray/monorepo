### 在 monorepo 目录下执行 `npm run  build` ，为什么会在 `packages`目录下运行

1. 首先查看根目录的 package.json

- -r 表示递归执行所有工作区的 build 命令
- 会执行 workspace 中所有包的 build 命令

```json
{
  "scripts": {
    "build": "pnpm -r build"
  }
}
```

2. 检查 pnpm-workspace.yaml 配置
   配置定义了工作区包含 packages 目录下的所有子包

```yaml
packages:
  - "packages/*"
```

3. 执行特定的包 `pnpm --filter @monorepo/utils build`
4. 如果想按特定顺序构建，可以在包的 package.json 中定义依赖关系。如果想看到构建过程可以添加 --stream 参数： `pnpm -r --stream build`

### 构建输出相关的声明文件 tsconfig.json 配置

```json
{
  "compilerOptions": {
    "declaration": true, // 生成声明文件
    "declarationDir": "./dist/types", // 声明文件输出目录
    "outDir": "./dist", // 编译输出目录
    "rootDir": "./src", // 源码根目录
    "emitDeclarationOnly": false // 是否只输出声明文件（false 表示同时输出 js 和 d.ts）
  }
}
```

### git 子模块

### github

### npm link / npm unlink
